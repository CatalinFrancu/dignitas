<?php

class Config {
  // Filesystem root of this installation. Include a trailing slash.
  const ROOT = __DIR__ . '/';

  // The concatenation URL_HOST + URL_PREFIX should yield the URL of the home
  // page of your installation.

  // protocol://host[:port] . No trailing slash.
  const URL_HOST = 'http://localhost';

  // URL path relative to URL_HOST. Include a trailing slash.
  const URL_PREFIX = '/dignitas/www/';

  // database connection
  const DB_HOST = 'localhost';
  const DB_DATABASE = 'dignitas';
  const DB_USER = 'root';
  const DB_PASSWORD = '';

  // development mode
  const DEVELOPMENT_MODE = true;

  // allow account creation
  const ALLOW_REGISTRATION = true;

  // allow account creation via invites from moderators
  const ALLOW_INVITES = true;

  // Shared drive (common to all backends). Include a trailing slash.
  const SHARED_DRIVE = '/srv/http/dignitas-shared/';

  // URLs of the database schema and sample data for bootstrapping a new installation
  const DATABASE_SCHEMA_URL = 'https://dignitas.ro/static/database-schema.sql';
  const SAMPLE_DATA_URL = 'https://dignitas.ro/static/sample-data.json';

  // Allowed MIME type => canonical file extension
  // In particular, we accept .jpg and .jpeg uploads, but canonicalize both to .jpg.
  const MIME_TYPES = [
    'application/pdf' => 'pdf',
    'image/gif' => 'gif',
    'image/jpeg' => 'jpg',
    'image/png' => 'png',
    'image/svg+xml' => 'svg',
    'text/css' => 'css',
    'text/html' => 'html',
    'text/javascript' => 'js',
  ];

  // Extensions for generated thumbnails, when different from the original file.
  const THUMB_EXTENSIONS = [
    'pdf' => 'jpg',
  ];

  // thumbnail geometries
  const THUMB_USER_NAVBAR = '24x24';
  const THUMB_USER_PROFILE = '200';
  const THUMB_ENTITY_AUTOCOMPLETE = '20x20';
  const THUMB_ENTITY_SMALL = '40';
  const THUMB_ENTITY_CAROUSEL = 'x128';
  const THUMB_ENTITY_LARGE = '200';
  const THUMB_INLINE_ATTACHMENT = '200'; // default geometry for inline attachments
  const THUMB_DOMAIN = '16x16';

  // Upload specifications.
  // Values in 'extensions' refer to the MIME types above.
  // Values in 'geometries' are passed to "convert -resize". Refer to [1] for geometry specs.
  // [1] https://www.imagemagick.org/script/command-line-processing.php#geometry
  const UPLOAD_SPECS = [
    // user profile images
    'User' => [
      'extensions' => [ 'gif', 'jpg', 'png', 'svg' ],
      'limit' => 16 << 20, // 16 MB,
      'geometries' => [
        self::THUMB_USER_NAVBAR,
        self::THUMB_USER_PROFILE,
      ],
    ],
    // entity profile images
    'Entity' => [
      'extensions' => [ 'gif', 'jpg', 'png', 'svg' ],
      'limit' => 16 << 20, // 16 MB,
      'geometries' => [
        self::THUMB_ENTITY_AUTOCOMPLETE,
        self::THUMB_ENTITY_SMALL,
        self::THUMB_ENTITY_CAROUSEL,
        self::THUMB_ENTITY_LARGE,
      ],
    ],
    // uploaded attachments
    'Attachment' => [
      'extensions' => [ 'gif', 'jpg', 'pdf', 'png', 'svg' ],
      'limit' => 64 << 20, // 16 MB,
      'geometries' => [ '100', '200', '300', '400', 'x100', 'x200', 'x300', 'x400', 'full' ],
    ],
    // domain images
    'Domain' => [
      'extensions' => [ 'gif', 'jpg', 'png', 'svg' ],
      'limit' => 1 << 20, // 1 MB,
      'geometries' => [
        self::THUMB_DOMAIN,
      ],
    ],
    // static resources
    'StaticResource' => [
      'extensions' => [ 'css', 'gif', 'html', 'javascript', 'jpg', 'png', 'svg', ],
      'limit' => 10 << 20, // 10 MB,
      // no geometries here -- we won't do any thumbnailing
    ],
  ];

  // logging
  const LOG_FILE = '/var/log/dignitas.log';
  const LOG_LEVEL = LOG_DEBUG;
  const LOG_SQL_QUERIES = false; // at the bottom of the HTML page

  // email info
  const CONTACT_EMAIL = 'test@test.com';
  const SMTP_SERVER = 'tls://your-server.com:587'; // for outgoing emails
  const EMAIL_IDENTITIES = [
    'test@test.com' => [
      'name' => 'dignitas',
      'password' => '1234',
    ],
  ];

  // localization
  const LOCALES = [
    'en_US.utf8' => 'English',
    'ro_RO.utf8' => 'română',
  ];
  const SELECT2_LOCALES = [
    'ro_RO.utf8' => 'ro',
  ];
  const DEFAULT_LOCALE = 'ro_RO.utf8';

  // When a file cannot be mapped to a URL in the current locale, use this
  // locale instead. This locale should be fully defined in Router::ROUTES for
  // all files and should match the language in which our PHP files are named.
  const DEFAULT_ROUTING_LOCALE = 'en_US.utf8';

  // home page carousel settings
  const CAROUSEL_PAGES = 3;
  const CAROUSEL_ROWS = 2;
  const CAROUSEL_COLUMNS = 3;

  // Some pages can vary dramatically between installations. Admins can define
  // static resources (HTML, CSS, Javascript) to be included on some key
  // pages. If a section is empty or if the corresponding static resources are
  // not defined, they will not be included. If multiple static resources
  // exist for a given name we load the first match from:
  // - the current user's locale
  // - the 'all locales' version
  // - the version with the lexicographically smallest locale
  const CUSTOM_SECTIONS = [
    // top of the home page, before the carousel, for anonymous users
    'homepage-top-guest' => [
      'html' => [ 'homepage-top.html' ],
      'css' => [ 'homepage.css' ],
      'js' => [ 'homepage.js' ],
    ],
    // bottom of the home page, after the carousel, for anonymous users
    'homepage-bottom-guest' => [
      'html' => [ 'homepage-bottom.html' ],
      'css' => [],
      'js' => [],
    ],
    // top of the home page, before the carousel, for logged in users
    'homepage-top-user' => [
      'html' => [],
      'css' => [],
      'js' => [],
    ],
    // bottom of the home page, after the carousel, for logged in users
    'homepage-bottom-user' => [
      'html' => [],
      'css' => [],
      'js' => [],
    ],
  ];

  // system stuff
  const TMP_DIR = '/tmp/';

  // Review votes necessary for removing or keeping a post.
  const REMOVE_VOTES_NECESSARY = 2;
  const KEEP_VOTES_NECESSARY = 2;

  // Reputation below which posts trigger a review with REASON_NEW_USER.
  const NEW_USER_REPUTATION = 100;

  // Number of unreviewed pending edits a user may have.
  const MAX_PENDING_EDITS = 5;

  // Answers added at least this many days after their Statement trigger a
  // review with REASON_LATE_ANSWER.
  const LATE_ANSWER_DAYS = 30;

  // Posts edited within this many days of their closure/deletion are placed
  // in a reopen queue.
  const EDIT_REOPEN_DAYS = 3;

  // Reputation gains / losses for various events.
  const REP_STATEMENT_UPVOTED = 10;
  const REP_STATEMENT_DOWNVOTED = -2; // when someone downvotes YOUR statement
  const REP_DOWNVOTE_STATEMENT = -1;  // when YOU downvote someone's statement
  const REP_ANSWER_UPVOTED = 10;
  const REP_ANSWER_DOWNVOTED = -2;
  const REP_DOWNVOTE_ANSWER = -1;
  const REP_COMMENT_UPVOTED = 0;
  const REP_COMMENT_DOWNVOTED = 0;
  const REP_DOWNVOTE_COMMENT = 0;
  const REP_ANSWER_PROOF = 10;        // your answer is accepted as proof
  const REP_SUGGESTED_EDIT = 2;
  const REP_SPAM_ABUSE = -100;

  // Loyalty settings. Define a set of adjacent intervals going back in time
  // and give points for every day in each interval. In the sample definition,
  //
  // * today's membership is worth 365 points
  // * the previous year is worth 1 point per day
  // * the two years before that are worth 0.5 points per day
  //
  // Thus, if a member moves from party A to party B today, their loyalty to A
  // will be 33% initially and slowly grow to 100% over three years.
  const LOYALTY_INTERVALS = [
    [ 0, 0, 365.0 ],
    [ 1, 365, 1.0 ],
    [ 366, 1095, 0.5 ],
  ];

  // Web page detailing how loyalty is determined. If defined, there will be a
  // link to it next to the loyalty widget on the entity page.
  const LOYALTY_URL = '';

  // Web page detailing how verdicts work. If defined, there will be a link to
  // it next to the verdict field on the answer form.
  const VERDICT_URL = '';
}
